(this["webpackJsonpreact-2048"]=this["webpackJsonpreact-2048"]||[]).push([[0],{20:function(t,e,o){t.exports=o(34)},25:function(t,e,o){},31:function(t,e,o){},32:function(t,e,o){},33:function(t,e,o){},34:function(t,e,o){"use strict";o.r(e);var n,i=o(0),r=o.n(i),a=o(10),c=o.n(a),l=(o(25),o(4)),s=o(5),f=o(11),u={boxes:[[{title:0,com_ani:!1},{title:0,com_ani:!1},{title:0,com_ani:!1},{title:0,com_ani:!1}],[{title:0,com_ani:!1},{title:0,com_ani:!1},{title:0,com_ani:!1},{title:0,com_ani:!1}],[{title:0,com_ani:!1},{title:0,com_ani:!1},{title:0,com_ani:!1},{title:0,com_ani:!1}],[{title:0,com_ani:!1},{title:0,com_ani:!1},{title:0,com_ani:!1},{title:0,com_ani:!1}]]},v=o(7),m=function(t){for(var e=Object(v.a)(t),o=[],n=0;n<4;n++){var i=Math.floor(4*Math.random());o.push(i)}return o[0]===o[2]&&o[1]===o[3]&&(o[0]=(o[0]+1)%4),e[o[0]][o[1]]=Object(s.a)({},e[o[0]][o[1]],{title:2,com_ani:!0}),e[o[2]][o[3]]=Object(s.a)({},e[o[2]][o[3]],{title:2,com_ani:!0}),e};!function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Up=2]="Up",t[t.Down=3]="Down"}(n||(n={}));var h,p=function(t,e){var o=Object(v.a)(t),i=!1;if(e===n.Up)for(var r=0;r<4;r++){for(var a=[],c=[],l=0,s=0;s<4;s++)if(0!==t[s][r].title)0===l?l=t[s][r].title:t[s][r].title===l?(!1===i&&(i=!0),a.push(2*l),c.push(a.length-1),l=0):(a.push(l),l=t[s][r].title);else if(!1===i)for(var f=s;f<4;f++)0!==t[f][r].title&&(i=!0);0!==l&&a.push(l);for(var u=a.length,m=0;m<u;m++)o[m][r].title=a[m];for(var h=u;h<4;h++)o[h][r].title=0;for(var p=c.length,d=0;d<p;d++)o[c[d]][r].com_ani=!0}if(e===n.Down)for(var g=0;g<4;g++){for(var w=[],E=[],j=0,C=3;C>=0;C--)if(0!==t[C][g].title)0===j?j=t[C][g].title:t[C][g].title===j?(!1===i&&(i=!0),w.push(2*j),E.push(w.length-1),j=0):(w.push(j),j=t[C][g].title);else if(!1===i)for(var _=C;_>=0;_--)0!==t[_][g].title&&(i=!0);0!==j&&w.push(j);for(var k=w.length,O=0;O<k;O++)o[3-O][g].title=w[O];for(var x=0;x<4-k;x++)o[x][g].title=0;for(var R=E.length,D=0;D<R;D++)o[3-E[D]][g].com_ani=!0}if(e===n.Left)for(var M=0;M<4;M++){for(var y=[],A=[],L=0,U=0;U<4;U++)if(0!==t[M][U].title)0===L?L=t[M][U].title:t[M][U].title===L?(!1===i&&(i=!0),y.push(2*L),A.push(y.length-1),L=0):(y.push(L),L=t[M][U].title);else if(!1===i)for(var F=U;F<4;F++)0!==t[M][F].title&&(i=!0);0!==L&&y.push(L);for(var S=y.length,B=0;B<S;B++)o[M][B].title=y[B];for(var I=S;I<4;I++)o[M][I].title=0;for(var N=A.length,J=0;J<N;J++)o[M][A[J]].com_ani=!0}if(e===n.Right)for(var T=0;T<4;T++){for(var W=[],$=[],q=0,z=3;z>=0;z--)if(0!==t[T][z].title)0===q?q=t[T][z].title:t[T][z].title===q?(!1===i&&(i=!0),W.push(2*q),$.push(W.length-1),q=0):(W.push(q),q=t[T][z].title);else if(!1===i)for(var G=z;G>=0;G--)0!==t[T][G].title&&(i=!0);0!==q&&W.push(q);for(var H=W.length,K=0;K<H;K++)o[T][3-K].title=W[K];for(var P=3-H;P>=0;P--)o[T][P].title=0;for(var Q=$.length,V=0;V<Q;V++)o[T][3-$[V]].com_ani=!0}return i?b(o):o},b=function(t){for(var e=[],o=0;o<4;o++)for(var n=0;n<4;n++)0===t[o][n].title&&e.push({i:o,j:n});var i=e.length;if(i>0){var r=e[Math.floor(Math.random()*i)];t[r.i][r.j].title=2,t[r.i][r.j].com_ani=!0}return t},d=function(t){var e=Object(v.a)(t);return t.forEach((function(t){t.forEach((function(t){t.com_ani=!1}))})),e};!function(t){t[t.MoveUp=0]="MoveUp",t[t.MoveDown=1]="MoveDown",t[t.MoveLeft=2]="MoveLeft",t[t.MoveRight=3]="MoveRight",t[t.InitRandom=4]="InitRandom",t[t.ResetComAni=5]="ResetComAni"}(h||(h={}));var g=Object(f.b)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case h.InitRandom:return Object(s.a)({},t,{boxes:m(t.boxes)});case h.MoveUp:return Object(s.a)({},t,{boxes:p(t.boxes,n.Up)});case h.MoveDown:return Object(s.a)({},t,{boxes:p(t.boxes,n.Down)});case h.MoveLeft:return Object(s.a)({},t,{boxes:p(t.boxes,n.Left)});case h.MoveRight:return Object(s.a)({},t,{boxes:p(t.boxes,n.Right)});case h.ResetComAni:return Object(s.a)({},t,{boxes:d(t.boxes)});default:return t}})),w=function t(e){var o=this;Object(l.a)(this,t),this.dispatch=void 0,this.initRandom=function(){return o.dispatch({type:h.InitRandom})},this.moveUp=function(){return o.dispatch({type:h.MoveUp})},this.moveDown=function(){return o.dispatch({type:h.MoveDown})},this.moveLeft=function(){return o.dispatch({type:h.MoveLeft})},this.moveRight=function(){return o.dispatch({type:h.MoveRight})},this.resetComAni=function(){return o.dispatch({type:h.ResetComAni})},this.dispatch=e},E=o(9),j=(o(31),o(19));o(32);var C=o(15),_=function(t){var e=t.box,o=e.com_ani,n=function(t){var e={title:"",color:"",titleColor:"#F9F6F2"};switch(e.title=0===t?"":t.toString(),t){case 0:e.color="#CCC0B4";break;case 2:e.color="#EEE4DA",e.titleColor="#776E65";break;case 4:e.color="#EDE0C8",e.titleColor="#776E65";break;case 8:e.color="#F2B179";break;case 16:e.color="#F59563";break;case 32:e.color="#F67C5F";break;case 64:e.color="#F65E3B";break;case 128:e.color="#EDCF72";break;case 256:e.color="#EDCC61";break;case 512:e.color="#EDC850";break;case 1024:e.color="#EDC53F";break;case 2048:e.color="#EDC22E";break;default:e.color="#000"}return e}(e.title),a=n.title,c=n.color,l=n.titleColor,s=Object(i.useState)(!0),f=Object(j.a)(s,2),u=f[0],v=f[1],m=Object(C.b)({from:{x:1},x:u?1:0,config:{duration:200}}).x;return Object(i.useEffect)((function(){!0===o&&v(!u)}),[o,u]),r.a.createElement(C.a.div,{className:"box",style:Object.assign({backgroundColor:c},{transform:m.interpolate({range:[0,.5,1],output:[1,1.25,1]}).interpolate((function(t){return"scale(".concat(t,")")}))})},r.a.createElement("p",{style:{color:l},className:"title"},a))},k=(o(33),function(t){var e=t.boxes;return r.a.createElement("div",{className:"game-board"},e.map((function(t,e){return r.a.createElement("div",{className:"row",key:e},t.map((function(t,o){return r.a.createElement(_,{box:t,key:4*e+o})})))})))}),O=o(18),x=function(){var t=Object(E.c)((function(t){return t.boxes})),e=Object(E.b)(),o=new w(e),n=function(t){var e=t.key,n=!1;"ArrowUp"===e&&(o.moveUp(),n=!0),"ArrowDown"===e&&(o.moveDown(),n=!0),"ArrowLeft"===e&&(o.moveLeft(),n=!0),"ArrowRight"===e&&(o.moveRight(),n=!0),!0===n&&o.resetComAni()};Object(i.useEffect)((function(){return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[]);var a=Object(O.a)({onSwipedLeft:function(t){o.moveLeft(),o.resetComAni()},onSwipedUp:function(t){o.moveUp(),o.resetComAni()},onSwipedDown:function(t){o.moveDown(),o.resetComAni()},onSwipedRight:function(t){o.moveRight(),o.resetComAni()},preventDefaultTouchmoveEvent:!0,trackMouse:!0,trackTouch:!0});return Object(i.useEffect)((function(){return o.initRandom(),o.resetComAni(),function(){console.log("out")}}),[]),r.a.createElement("div",Object.assign({className:"container"},a),r.a.createElement(k,{boxes:t}))},R=function(){return r.a.createElement(E.a,{store:g},r.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.247aab1c.chunk.js.map